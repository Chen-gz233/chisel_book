circuit FSM :
  module FSM :
    input clock : Clock
    input reset : UInt<1>
    input io_in : UInt<1>
    output io_out : UInt<1>

    reg stage : UInt<4>, clock with :
      reset => (UInt<1>("h0"), stage) @[main.scala 21:24]
    node _T = eq(UInt<4>("h0"), stage) @[main.scala 24:18]
    node _T_1 = eq(io_in, UInt<1>("h0")) @[main.scala 26:24]
    node _GEN_0 = mux(_T_1, UInt<4>("h1"), UInt<4>("h5")) @[main.scala 26:32 27:23 29:23]
    node _T_2 = eq(UInt<4>("h1"), stage) @[main.scala 24:18]
    node _T_3 = eq(io_in, UInt<1>("h0")) @[main.scala 33:24]
    node _GEN_1 = mux(_T_3, UInt<4>("h2"), UInt<4>("h5")) @[main.scala 33:32 34:23 37:23]
    node _GEN_2 = mux(_T_3, UInt<1>("h0"), UInt<1>("h0")) @[main.scala 33:32 35:24 38:24]
    node _T_4 = eq(UInt<4>("h2"), stage) @[main.scala 24:18]
    node _T_5 = eq(io_in, UInt<1>("h0")) @[main.scala 43:24]
    node _GEN_3 = mux(_T_5, UInt<4>("h3"), UInt<4>("h5")) @[main.scala 43:32 44:23 46:23]
    node _T_6 = eq(UInt<4>("h3"), stage) @[main.scala 24:18]
    node _T_7 = eq(io_in, UInt<1>("h0")) @[main.scala 50:24]
    node _GEN_4 = mux(_T_7, UInt<4>("h4"), UInt<4>("h5")) @[main.scala 50:32 51:23 53:23]
    node _T_8 = eq(UInt<4>("h4"), stage) @[main.scala 24:18]
    node _T_9 = eq(io_in, UInt<1>("h0")) @[main.scala 57:24]
    node _GEN_5 = mux(_T_9, UInt<4>("h4"), UInt<4>("h5")) @[main.scala 57:32 58:23 61:23]
    node _GEN_6 = mux(_T_9, UInt<1>("h1"), UInt<1>("h0")) @[main.scala 23:12 57:32 59:24]
    node _T_10 = eq(UInt<4>("h5"), stage) @[main.scala 24:18]
    node _T_11 = eq(io_in, UInt<1>("h0")) @[main.scala 66:24]
    node _GEN_7 = mux(_T_11, UInt<4>("h1"), UInt<4>("h6")) @[main.scala 66:32 67:23 70:23]
    node _GEN_8 = mux(_T_11, UInt<1>("h0"), UInt<1>("h0")) @[main.scala 66:32 68:24 71:24]
    node _T_12 = eq(UInt<4>("h6"), stage) @[main.scala 24:18]
    node _T_13 = eq(io_in, UInt<1>("h0")) @[main.scala 75:24]
    node _GEN_9 = mux(_T_13, UInt<4>("h1"), UInt<4>("h7")) @[main.scala 75:32 76:23 78:23]
    node _T_14 = eq(UInt<4>("h7"), stage) @[main.scala 24:18]
    node _T_15 = eq(io_in, UInt<1>("h0")) @[main.scala 83:24]
    node _GEN_10 = mux(_T_15, UInt<4>("h1"), UInt<4>("h8")) @[main.scala 83:32 84:23 86:23]
    node _T_16 = eq(UInt<4>("h8"), stage) @[main.scala 24:18]
    node _T_17 = eq(io_in, UInt<1>("h0")) @[main.scala 91:28]
    node _GEN_11 = mux(_T_17, UInt<4>("h1"), UInt<4>("h8")) @[main.scala 91:36 92:27 94:27]
    node _GEN_12 = mux(_T_17, UInt<1>("h0"), UInt<1>("h1")) @[main.scala 23:12 91:36 95:28]
    node _GEN_13 = mux(_T_16, _GEN_11, stage) @[main.scala 24:18 21:24]
    node _GEN_14 = mux(_T_16, _GEN_12, UInt<1>("h0")) @[main.scala 23:12 24:18]
    node _GEN_15 = mux(_T_14, _GEN_10, _GEN_13) @[main.scala 24:18]
    node _GEN_16 = mux(_T_14, UInt<1>("h0"), _GEN_14) @[main.scala 23:12 24:18]
    node _GEN_17 = mux(_T_12, _GEN_9, _GEN_15) @[main.scala 24:18]
    node _GEN_18 = mux(_T_12, UInt<1>("h0"), _GEN_16) @[main.scala 23:12 24:18]
    node _GEN_19 = mux(_T_10, _GEN_7, _GEN_17) @[main.scala 24:18]
    node _GEN_20 = mux(_T_10, _GEN_8, _GEN_18) @[main.scala 24:18]
    node _GEN_21 = mux(_T_8, _GEN_5, _GEN_19) @[main.scala 24:18]
    node _GEN_22 = mux(_T_8, _GEN_6, _GEN_20) @[main.scala 24:18]
    node _GEN_23 = mux(_T_6, _GEN_4, _GEN_21) @[main.scala 24:18]
    node _GEN_24 = mux(_T_6, UInt<1>("h0"), _GEN_22) @[main.scala 23:12 24:18]
    node _GEN_25 = mux(_T_4, _GEN_3, _GEN_23) @[main.scala 24:18]
    node _GEN_26 = mux(_T_4, UInt<1>("h0"), _GEN_24) @[main.scala 23:12 24:18]
    node _GEN_27 = mux(_T_2, _GEN_1, _GEN_25) @[main.scala 24:18]
    node _GEN_28 = mux(_T_2, _GEN_2, _GEN_26) @[main.scala 24:18]
    node _GEN_29 = mux(_T, _GEN_0, _GEN_27) @[main.scala 24:18]
    node _GEN_30 = mux(_T, UInt<1>("h0"), _GEN_28) @[main.scala 23:12 24:18]
    node outReg = _GEN_30 @[main.scala 22:22]
    io_out <= outReg @[main.scala 100:8]
    stage <= mux(reset, UInt<4>("h0"), _GEN_29) @[main.scala 21:{24,24}]
