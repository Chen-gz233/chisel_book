
# 五级流水线处理器


一个五级流水线处理器，分为五个阶段：
变量名 | 功能
---|----
  IF (Instruction Fetch) | 指令获取阶段
  ID (Instruction Decode) | 指令解码阶段
  EX (Execute) | 执行阶段
  MEM (Memory Access) | 内存访问阶段
  WB (Write Back) | 写回阶段

单周期五级流水处理器模块通过多个子模块和寄存器连接，实现了指令的流水线处理。每个子模块负责一个特定的功能，通过寄存器传递中间结果，从而在每个时钟周期内并行执行多个指令阶段。
## IF 阶段

变量名 | 功能
---|----
next_pc | 计算下一条指令地址，根据条件分支信号和其他输入决定下一条指令地址
add_4| 当前PC加4，得到下一条顺序执行指令的地址
pc | 前指令地址，在时钟上升沿更新PC值
instruction_mem| 指令存储器，根据PC地址取出指令

## ID 阶段
变量名 | 功能
---|----
if_id|  存储IF阶段的PC值和指令，在ID阶段使用
id|  指令解码，解码指令，提取操作码、功能码和寄存器地址等信息
controller|  根据操作码和功能码生成控制信号
reg_file|  寄存器文件，读写寄存器数据
imm|  生成32位立即数
hazard_detection_unit|  检测数据冒险并生成停顿信号


## EX 阶段
变量名 | 功能
---|----
id_ex| 存储ID阶段的中间结果，在EX阶段使用
mux_3| 多路选择器，用于旁路数据选择，避免数据冒险
mux_2| 两路选择器，选择ALU的输入
add_pc| 计算分支目标地址
alu| 算术逻辑单元，执行计算操作
forward_unit| 数据旁路单元，避免数据冒险

## MEM 阶段

变量名 | 功能
---|----
ex_me| 存储EX阶段的中间结果，在MEM阶段使用
data_mem| 数据存储器，执行读写操作

## WB 阶段
变量名 | 功能
---|----
me_wb| 存储MEM阶段的中间结果，在WB阶段使用
mux_2| 多路选择器，选择写回数据